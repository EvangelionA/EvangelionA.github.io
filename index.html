<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="media/icon.jpg" type="image/jpeg" />
    <title>gaussian-splatting-engineering</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./static/css/dics.original.css" />

    <style>
      :root {
        --accent: #2e5e7e;
        --bg: #faf9f6;
        --text: #333;
        --light-blue: #7db3d3; /* Pantone 5425 C inspired - lighter, more pleasant blue */
        --hover-blue: #5fb3d4; /* Pantone 3125 C inspired - for hover states */
        --p-blue-1: #5daef6; /* Pantone 2171 C */
        --p-blue-2: #b9e3ff; /* Pantone 2905 C */
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        margin: 0;
        font-family: "Roboto", sans-serif;
        background: var(--bg);
        color: var(--text);
        scroll-behavior: smooth;
      }

      /* ——— Hero container ——— */
      .hero-wrapper {
        position: relative;
        width: 100%;
        background: #000;
        isolation: isolate;
        overflow: hidden;
      }

      .hero-section {
        width: 100%;
        display: none;
      }

      /* ——— 3×3 Gaussian-splat grid ——— */
      #splat-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0;
      }

      .splat-cell {
        position: relative;
        width: 100%;
        aspect-ratio: 16 / 9;
        overflow: hidden;
        background: transparent;
      }

      .splat-canvas {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        display: block;
      }

      /* hide Luma overlays */
      .luma-info-panel,
      .luma-logo {
        display: none !important;
      }

      /* ——— Fly-through video ——— */
      .fly-player {
        width: 100%;
        height: auto;
        object-fit: cover;
        display: block;
      }

      /* ——— Bottom-center toggle ——— */
      #hero-toggle {
        position: absolute;
        left: 50%;
        bottom: 24px;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        z-index: 20;
      }

      #hero-toggle .track {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: min(92vw, 320px);
        height: 40px;
        padding: 4px;
        border-radius: 9999px;
        background: rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(6px);
        cursor: pointer;
        transition: background 0.3s ease;
      }

      #hero-toggle:hover .track {
        background: rgba(255, 255, 255, 0.18);
      }

      #hero-toggle .track .label {
        flex: 1;
        position: static !important;
        transform: none !important;
        text-align: center;
        pointer-events: none;
        font-size: 0.8rem;
        font-weight: 500;
        color: #1f1e1d;
        white-space: nowrap;
      }


      #hero-toggle .thumb {
        position: absolute;
        top: 4px;
        left: 4px;
        height: 32px;
        width: calc((100% - 8px) / 4);
        border-radius: 9999px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(6px);
        transition: transform 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
        /* box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1); */
      }

      /* ——— Video 1 overlay title ——— */
      #fly-video-1 {
        position: relative;
      }

      .video-title {
        position: absolute;
        top: 2%;
        left: 50%;
        transform: translateX(-50%);
        max-width: min(90%, 1800px);
        font-size: clamp(2rem, 4vw + 1rem, 3rem);
        font-weight: 250;
        line-height: 1.15;
        text-align: center;
        color: #ffffff;
        text-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        pointer-events: none;
        z-index: 10;
      }

      .video-title .gradient-text {
        background: linear-gradient(90deg, #e95858 0%, #5fa8ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        display: inline-block;
      }

      /* ——— Content columns ——— */
      .content {
        display: flex;
        flex-direction: row;
        padding: 20px;
        opacity: 0;
        transition: opacity 2s;
      }

      .content.visible {
        opacity: 1;
      }

      .toc-wrapper {
        width: 20%;
        padding-right: 2%;
        padding-left: 5%;
        position: relative;
        padding-top: 80px;
      }

      .toc-placeholder {
        display: none;
        height: 0;
      }

      .toc {
        position: relative;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 1.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(46, 94, 126, 0.1);
        transition: box-shadow 0.3s ease;
      }

      .toc.fixed {
        position: fixed;
        top: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        z-index: 100;
      }

      .toc::before {
        content: "Contents";
        display: block;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--accent);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--accent);
      }

      .toc a {
        display: flex;
        align-items: center;
        padding: 0.75rem 0;
        color: #64748b;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9rem;
        border-radius: 6px;
        margin-bottom: 0.25rem;
        position: relative;
        transition: all 0.2s ease;
      }

      .toc a::before {
        content: "";
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #cbd5e1;
        margin-right: 0.75rem;
        transition: all 0.2s ease;
      }

      .toc a:hover {
        color: var(--accent);
        background: rgba(46, 94, 126, 0.05);
        transform: translateX(4px);
      }

      .toc a:hover::before {
        background: var(--accent);
        transform: scale(1.2);
      }

      .toc a.active {
        color: var(--accent);
        background: linear-gradient(
          135deg,
          rgba(46, 94, 126, 0.1),
          rgba(46, 94, 126, 0.05)
        );
        font-weight: 600;
      }

      .toc a.active::before {
        background: var(--accent);
        box-shadow: 0 0 0 3px rgba(46, 94, 126, 0.2);
      }

      .vertical-divider {
        width: 2px;
        background: #e0e0e0;
        height: 150px;
        position: absolute;
        left: 100%;
        top: 0;
        z-index: 1000;
      }

      .toc.fixed + .vertical-divider {
        position: fixed;
        top: 20px;
        height: 150px;
      }

      .main-content {
        width: 70%;
        padding-left: 8%;
        padding-right: 8%;
        border-left: 2px solid #e0e0e0;
      }

      .paper-title {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 20px;
      }

      .section {
        margin-bottom: 40px;
      }

      .section h2 {
        font-size: 24px;
        margin-bottom: 20px;
      }

      .author-list a {
        color: #4b9ae8;
        text-decoration: none;
      }

      .author-list a:hover {
        text-decoration: underline;
      }

      /* ——— Links ——— */
      a {
        text-decoration: none;
        transition: all 0.2s ease;
      }

      a:hover {
        text-decoration: underline;
      }

      /* ——— Observations list ——— */
      .observations-list {
        list-style: none;
        padding: 0;
        margin: 2rem 0;
      }

      .observation-item {
        background: #f8fafc;
        border-left: 4px solid var(--p-blue-1);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border-radius: 0 8px 8px 0;
        font-size: 1rem;
        line-height: 1.7;
        color: #374151;
      }

      /* ——— Dataset table ——— */
      #dataset .dataset-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: 0.9rem;
        background: #fff;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(46, 94, 126, 0.1);
      }

      #dataset .dataset-table th,
      #dataset .dataset-table td {
        padding: 12px 16px;
        text-align: center;
        white-space: nowrap;
        position: relative;
      }

      /* Header styling */
      #dataset .dataset-table thead th {
        background: linear-gradient(135deg, var(--accent), #4a7ba7);
        color: white;
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: none;
      }

      #dataset .dataset-table thead th:first-child {
        border-top-left-radius: 10px;
      }

      #dataset .dataset-table thead th:last-child {
        border-top-right-radius: 10px;
        background: linear-gradient(135deg, #e95858c1, #5fa8ff) !important;
      }

      /* Row styling with alternating colors */
      #dataset .dataset-table tbody tr {
        transition: all 0.2s ease;
        animation: fadeIn 0.3s ease-in-out;
      }

      #dataset .dataset-table tbody tr:nth-child(odd) {
        background: #f8fafc;
      }

      #dataset .dataset-table tbody tr:nth-child(even) {
        background: #ffffff;
      }

      #dataset .dataset-table tbody tr:hover {
        background: rgba(46, 94, 126, 0.05);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* First column (metric names) styling */
      #dataset .dataset-table td:first-child {
        background: rgba(46, 94, 126, 0.03) !important;
        font-weight: 600;
        color: var(--accent);
        text-align: left;
        border-right: 2px solid rgba(46, 94, 126, 0.1);
        /* background-clip: padding-box; */
      }

      /* Last column (SceneSplat-7K) highlighting */
      #dataset .dataset-table td:last-child {
        background: linear-gradient(
          135deg,
          rgba(233, 88, 88, 0.1),
          rgba(95, 168, 255, 0.1)
        ) !important;
        font-weight: 700;
        color: #2563eb;
        border-left: 2px solid rgba(233, 88, 88, 0.2);
        /* background-clip: padding-box; */
      }

      /* Add small badges for large numbers */
      #dataset .dataset-table td:last-child::before {
        content: "";
        color: #fbbf24;
        margin-right: 4px;
        font-size: 0.8em;
      }

      /* Section dividers */
      #dataset .dataset-table tr.divider-after td {
        border-bottom: 2px solid rgba(46, 94, 126, 0.2);
        /* background-clip: border-box !important; */
        position: relative;
      }

      #dataset .dataset-table tr.divider-after td::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 8px;
        background: linear-gradient(
          to bottom,
          rgba(46, 94, 126, 0.05),
          transparent
        );
        display: none;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ——— Framework image ——— */
      .framework-image img {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
        padding: 20px;
        background: #fff;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      .framework-image img:hover {
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.12);
        filter: brightness(1.03) saturate(1.1);
        transform: translateY(-2px);
      }

      /* ——— BibTeX container ——— */
      .bibtex-container {
        position: relative;
        background: linear-gradient(0deg, #fefeff 0%, #ffffff 100%);
        border: 1px solid rgba(46, 94, 126, 0.1);
        border-radius: 10px;
        padding: 0;
        margin: 1.5rem 0;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .bibtex-container:hover {
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.12);
        transform: translateY(-2px);
      }

      .bibtex-container pre {
        margin: 0;
        padding: 1.5rem;
        font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono",
          "Consolas", monospace;
        font-size: 0.875rem;
        line-height: 1.6;
        color: #334155;
        background: transparent;
        overflow-x: auto;
        white-space: pre;
      }

      /* Modern copy button */
      .copy-button {
        position: absolute;
        top: 12px;
        right: 12px;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(46, 94, 126, 0);
        border-radius: 9px;
        padding: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        z-index: 10;
      }

      .copy-button:hover {
        background: rgba(255, 255, 255, 1);
        border-color: rgba(46, 94, 126, 0);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .copy-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }

      .copy-button svg {
        width: 18px;
        height: 18px;
        stroke: var(--accent);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: absolute;
      }

      /* Icon animations */
      .copy-button .clipboard {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }

      .copy-button .check {
        opacity: 0;
        transform: scale(0.5) rotate(-45deg);
      }

      .copy-button.copied .clipboard {
        opacity: 0;
        transform: scale(0.5) rotate(45deg);
      }

      .copy-button.copied .check {
        opacity: 1;
        transform: scale(1) rotate(0deg);
        stroke: #10b981;
      }

      /* Success state styling */
      .copy-button.copied {
        background: rgba(16, 185, 129, 0.1);
        border-color: #10b981;
      }

      /* ——— Scene Query Results ——— */
      .scene-query-results {
        margin: 2rem 0;
      }

      .query-result-item {
        margin-bottom: 2.5rem;
        text-align: center;
      }

      .query-image {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        display: block;
        margin: 0 auto;
      }

      .query-image:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
        filter: brightness(1.02) saturate(1.05);
      }

      .query-caption {
        margin-top: 1rem;
        font-size: 0.95rem;
        color: #64748b;
        font-weight: 500;
      }

      .query-caption strong {
        color: var(--accent);
        font-weight: 600;
      }

      /* Video styling to match query images */
      .query-video {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        display: block;
        margin: 0 auto;
        background: #000;
      }

      .query-video:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
        filter: brightness(1.02) saturate(1.05);
      }

      /* ——— Scene switcher ——— */
      .scene-switcher {
        margin: 2rem 0;
        display: flex;
        justify-content: center;
      }

      .scene-buttons {
        display: flex;
        flex-wrap: wrap;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 0.75rem;
        max-width: 800px;
        width: 100%;
        justify-content: center;
        align-items: center;
      }

      .scene-button {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(46, 94, 126, 0.1);
        border-radius: 12px;
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
        font-weight: 500;
        color: #64748b;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono",
          "Consolas", monospace;
        width: 100%;
        max-width: 160px;
      }

      .scene-button:hover {
        background: rgba(255, 255, 255, 1);
        color: var(--accent);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(46, 94, 126, 0.15);
      }

      .scene-button.active {
        background: #4a7ba7;
        color: white;
        box-shadow: 0 4px 16px rgba(46, 94, 126, 0.25);
        transform: translateY(-1px);
      }

      .scene-button.active:hover {
        background: #4a7ba7;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(46, 94, 126, 0.3);
      }

      /* ——— Image slider (Dics) ——— */
      .b-dics {
        max-width: 800px;
        height: 300px;
        margin: 1.5rem auto;
        position: relative;
      }

      .b-dics img {
        border-radius: 10px;
      }

      /* Slider controls */
      #scene-comparison-wrapper {
        transition: min-height 0.3s ease;
      }

      /* ——— Responsive styles ——— */
      @media (max-width: 1024px) {
        .content {
          flex-direction: column;
          padding: 10px;
        }

        .toc-wrapper {
          width: 100%;
          padding: 20px 0 0 5%;
        }

        .toc.fixed {
          position: relative !important;
          top: 0 !important;
          width: 100% !important;
          left: auto !important;
        }

        .toc-placeholder {
          display: none !important;
        }

        .main-content {
          width: 100%;
          padding: 0 5%;
          border-left: none;
        }

        .vertical-divider {
          display: none;
        }

        #splat-grid {
          grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        }

        #dataset .dataset-table {
          font-size: 0.8rem;
        }

        #dataset .dataset-table th,
        #dataset .dataset-table td {
          padding: 8px 12px;
        }
      }

      @media (max-width: 768px) {
        #dataset .dataset-table {
          font-size: 0.75rem;
          border-radius: 8px;
        }

        #dataset .dataset-table th,
        #dataset .dataset-table td {
          padding: 6px 8px;
        }

        #dataset .dataset-table thead th:first-child {
          border-top-left-radius: 8px;
        }

        #dataset .dataset-table thead th:last-child {
          border-top-right-radius: 8px;
        }

        .bibtex-container:hover {
          transform: scale(1.01) translateY(-3px);
        }

        .bibtex-container pre {
          font-size: 0.75rem;
          padding: 1rem;
          padding-right: 3rem;
        }

        .copy-button {
          top: 8px;
          right: 8px;
          padding: 6px;
        }

        .copy-button svg {
          width: 16px;
          height: 16px;
        }

        .framework-image img:hover {
          transform: scale(1.01) translateY(-3px);
        }

        .query-result-item {
          margin-bottom: 2rem;
        }

        .query-image:hover {
          transform: translateY(-1px);
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
        }

        .query-caption {
          font-size: 0.9rem;
          margin-top: 0.75rem;
        }

        .scene-buttons {
          grid-template-columns: repeat(3, 1fr);
          grid-template-rows: repeat(3, 1fr);
          gap: 0.5rem;
        }

        .scene-button {
          padding: 0.6rem 0.75rem;
          font-size: 0.75rem;
          max-width: 150px;
        }
      }

      @media (max-width: 480px) {
        #hero-toggle .track {
          width: 90vw;
          height: 32px;
          font-size: 0.68rem;
        }

        .scene-buttons {
          grid-template-columns: repeat(2, 1fr);
          grid-template-rows: repeat(4, 1fr);
          gap: 0.5rem;
        }

        .scene-button {
          padding: 0.5rem 0.5rem;
          font-size: 0.7rem;
          max-width: 140px;
        }
      }
    </style>

    <script>
      /* Toggle the Video-1 title overlay */
      const SHOW_VIDEO1_TITLE = false; /* ← set to false to hide it */
    </script>

    <!-- import map -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/",
          "@lumaai/luma-web": "https://unpkg.com/@lumaai/luma-web@0.2.0/dist/library/luma-web.module.js"
        }
      }
    </script>
  </head>

  <body>
    <div class="hero-wrapper">
      <!-- ===== SPLAT GRID ===== -->
      <section id="splat-grid" class="hero-section">
        <!-- nine placeholders -->
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
        <div class="splat-cell"><canvas class="splat-canvas"></canvas></div>
      </section>

      <!-- ===== VIDEO 1 WITH OVERLAY ===== -->
      <section id="fly-video-1" class="hero-section">
        <video class="fly-player" muted playsinline preload="auto">
          <source
            src="media//3dgs_origin/kitti_07_3dgs_sibr.mp4"
            type="video/mp4"
          />
        </video>

        <!-- ✧ Title overlay (only for this video) ✧ -->
        <div class="video-title" id="scene-title">
          <span class="gradient-text">SceneSplat</span>
        </div>
      </section>

      <!-- ===== VIDEO 2 ===== -->
      <section id="fly-video-2" class="hero-section">
        <video class="fly-player" muted loop playsinline preload="auto">
          <source
            src="media//3dgs_Application/web+3dgs.mp4"
            type="video/mp4"  
          />
        </video>
      </section>

      <!-- ===== VIDEO 3 ===== -->
      <section id="fly-video-3" class="hero-section">
        <video class="fly-player" muted loop playsinline preload="auto">
          <source
            src="media//3dgs_origin/kitti_07_3dgs_sibr.mp4"
            type="video/mp4"
          />
        </video>
      </section>

      <!-- ===== Bottom-center toggle switch ===== -->
      <div id="hero-toggle" aria-label="Toggle splats / videos">
        <div class="track">
          <span class="label label-0">Video 1</span>
          <span class="label label-1">Video 2</span>
          <span class="label label-2">Video 3</span>
          <span class="label label-3">Data</span>
          <span class="thumb"></span>
        </div>
      </div>
    </div>

    <!-- ✧ Main sections (with sticky TOC) ✧ -->
    <div class="content" id="content">
      <!-- LEFT COLUMN –– Table-of-content -->
      <div class="toc-wrapper">
        <nav id="toc" class="toc">
          <a href="#info">Introduction</a>
          <a href="#motivation">Motivation</a>
          <a href="#dataset">Dataset</a>
          <a href="#results">Qualitative Results</a>
          <a href="#workflow">Workflow</a>
          <a href="#implementation">Implementation</a>
          <a href="#acknowledgement">Acknowledgement</a>
        </nav>
        <div class="toc-placeholder"></div>
        <div class="vertical-divider"></div>
      </div>

      <!-- RIGHT COLUMN –– paper body -->
      <div class="main-content">
        <!-- ----- BEGIN PAPER SECTIONS ----- -->
        <div id="info" class="section">
          <p class="paper-title">
            gaussian-splatting-engineering
          </p>          
          <p>
            <strong style="vertical-align: middle">Links:</strong>
            <a
              href="https://github.com/EvangelionA/gaussian-splatting-engineering"
              target="_blank"
              style="text-decoration: none; vertical-align: middle"
            >
              <img
                src="https://img.shields.io/badge/GitHub-Repo-blue?logo=github"
                alt="GitHub Link"
                style="vertical-align: middle"
              />
            </a>
           
          </p>

          <p class="author-list">
            <strong>Authors:</strong>
            <a href="https://evangeliona.github.io/" id="yue-li"
              ><sup>*</sup>EvangelionA</a
            >           
          </p>
        </div>

        <div id="motivation" class="section">
          <h2>Motivation</h2>
          <p style="line-height: 1.4; margin-bottom: 10px;">
            This repository aims to bridge the gap between academic research and industrial deployment of 3D Gaussian Splatting (3DGS) technology. While most existing papers focus on theoretical innovations, this project emphasizes:
          </p>
          <ul class="observations-list" style="margin: 8px 0;">
            <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
              <strong>Engineering-oriented Implementation</strong> - Providing practical, scalable 3DGS solutions with a focus on performance and stability in real-world application scenarios.
            </li>
            <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
              <strong>Steady Performance Optimization</strong> - Systematically improving and optimizing 3DGS to enhance operational efficiency across various hardware configurations and environments.
            </li>
            <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
              <strong>Systematic Documentation of Practical Workflows</strong> - Comprehensive documentation of the complete pipeline from data acquisition and camera pose estimation to 3DGS training and application.
            </li>
          </ul>
          <p style="line-height: 1.4; margin-top: 10px;">
            Our project is built upon the original <strong>3DGS</strong>.
          </p>
          <p class="author-list">
            <strong>Bilibili:</strong>
            <a href="https://www.bilibili.com/video/BV1ScnmzSEe2/?spm_id_from=333.1387.homepage.video_card.click&vd_source=62966dfe4f258c606c7e7a73cd25e4a6" id="yue-li">gaussian-splatting-engineering[Introduction](项目介绍)</a>           
          </p>
        </div>

        

        <div id="dataset" class="section">
          <h2>Dataset</h2>

          <table class="dataset-table">
            <thead>
              <tr>
                <th>Dataset</th>
                <th>Model</th>
                <th>PSNR</th>
                <th>SSIM</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td rowspan="3"><strong>KITTI</strong></td>
                <td><strong>3DGS_base</strong></td>
                <td>28.50</td>
                <td>----</td>
              </tr>
              <tr>
                <td><strong>ABS-GS</strong></td>
                <td>28.55</td>
                <td>----</td>
              </tr>
              <tr>
                <td><strong>RAIN-GS</strong></td>
                <td>----</td>
                <td>----</td>
              </tr>
              <tr class="divider-after">
                <td colspan="4"></td>
              </tr>

              <tr>
                <td rowspan="3"><strong>smith_hall_outdoor</strong></td>
                <td><strong>3DGS_base</strong></td>
                <td>24.85</td>
                <td>----</td>
              </tr>
              <tr>
                <td><strong>ABS-GS</strong></td>
                <td>24.64</td>
                <td>----</td>
              </tr>
              <tr>
                <td><strong>RAIN-GS</strong></td>
                <td>----</td>
                <td>----</td>
              </tr>
            </tbody>
          </table>

          <p style="line-height: 1.5; margin-top: 8px">
          </p>
        </div>
        
        <div id="results" class="section">
          <h2>Qualitative Results</h2>
        
          <!-- Scene Switcher -->           
          <div class="scene-switcher">
            <div class="scene-buttons">
              <strong>WIP</strong>
              <!--
              <button class="scene-button active" data-scene="bde1e479ad">
                bde1e479ad
              </button>              
              <button class="scene-button" data-scene="1ada7a0617">
                1ada7a0617
              </button>
              <button class="scene-button" data-scene="5942004064">
                5942004064
              </button>
              <button class="scene-button" data-scene="09c1414f1b">
                09c1414f1b
              </button>
              <button class="scene-button" data-scene="3db0a1c8f3">
                3db0a1c8f3
              </button>
              <button class="scene-button" data-scene="3864514494">
                3864514494
              </button>
              <button class="scene-button" data-scene="5f99900f09">
                5f99900f09
              </button>
              <button class="scene-button" data-scene="9071e139d9">
                9071e139d9
              </button>
              <button class="scene-button" data-scene="fb5a96b1a2">
                fb5a96b1a2
              </button>
              -->
            </div>
          </div>


          <!-- Image Slider Comparison -->
           <!--
          <div
            id="scene-comparison-wrapper"
            style="max-width: 800px; width: 100%; margin: 1.5rem auto"
          >
            <div class="b-dics" style="font-weight: 600">
              <img src="media/icon.jpg" alt="3DGS Render" />
              <img src="media/icon.jpg" alt="Inference (PCA)" />
              <img src="media/icon.jpg" alt="Zeo-shot Sem. Seg." />
              <img src="media/icon.jpg" alt="Sem. Seg. GT" />
            </div>
          </div>

        
        <h3>Additional Segmentation Results</h3>
          <div class="scene-query-results">
            <div class="query-result-item">
              <img
                src="results/land_pred_vis.png"
                alt="Additional Segmentation Results"
                class="query-image"
              />
            </div>
          </div>
        </div>
        --> 

        <div id="workflow" class="section">
          <h2>Workflow</h2>
          <p class="author-list">
            <strong>Bilibili:</strong>
            <a href="https://www.bilibili.com/video/BV1nvxnzgEtq/?spm_id_from=333.1387.homepage.video_card.click&vd_source=62966dfe4f258c606c7e7a73cd25e4a6" id="yue-li">gaussian-splatting-engineering[Introduction](PIPLINE梳理)</a>           
          </p>
          <div class="framework-image">
            <img
              src="media/gaussian-splatting-engineering[PIPLINE].png"
              alt="Gaussian Splatting Engineering Pipeline"
              style="width: 100%; max-width: 100%; height: auto;"
            />
          </div>
          
          <div class="workflow-steps">
            <div class="workflow-step">
              <h3>Stage_0. Data Acquisition</h3>
              <!--
              <ul class="observations-list" style="margin: 8px 0;">
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>camera model</strong>
                  <ul>
                    <li>
                      <strong>pinhole camera model</strong>:
                    </li>
                    <li>
                      <strong>fisheye camera model</strong>:
                    </li>
                  </ul>
                  
                </li>
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>acquisition model</strong>
                  <ul>
                    <li>
                      <strong>forward-motion scanning</strong>:
                    </li>
                    <li>
                      <strong>side motion scanning</strong>:
                    </li>
                  </ul>
                </li>
              </ul>
              -->
            </div>
            
            <div class="workflow-step">
              <h3>Stage_1. Camera Pose Estimation</h3>
              <!--
              <p style="line-height: 1.5">
                Accurate camera pose estimation is critical for high-quality 3D Gaussian Splatting. Our pipeline integrates:
              </p>
              <ul class="observations-list" style="margin: 8px 0;">
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>COLMAP Integration</strong> - Robust Structure-from-Motion (SfM) for camera pose estimation
                </li>
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>Pose Refinement</strong> - Advanced techniques to improve pose accuracy in challenging scenarios
                </li>
              </ul>
              -->
            </div>
            
            <div class="workflow-step">
              <h3>Stage_2. 3DGS Training</h3>
              <!--
              <p style="line-height: 1.5">
                Our optimized training pipeline includes:
              </p>
              <ul class="observations-list" style="margin: 8px 0;">
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>Baseline 3DGS</strong> - Implementation of the original 3D Gaussian Splatting algorithm
                </li>
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>ABS-GS</strong> - Enhanced version addressing gradient collision issues in adaptive density control
                </li>
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>RAIN-GS</strong> - Robust scene modeling with improved performance in challenging environments
                </li>
              </ul>
              -->
            </div>
            
            <div class="workflow-step">
              <h3>Stage_3. Export & Deployment</h3>
              <!--
              <p style="line-height: 1.5">
                Comprehensive support for various export formats and deployment scenarios:
              </p>
              <ul class="observations-list" style="margin: 8px 0;">
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>Format Support</strong> - Export to USDZ, SPZ, and other industry-standard formats
                </li>
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>Web Viewer</strong> - Optimized web-based rendering for cross-platform visualization
                </li>
                <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                  <strong>Performance Optimization</strong> - Tools for model compression and runtime optimization
                </li>
              </ul>
              -->
            </div>
          </div>
        </div>

        <!--
        <div id="implementation" class="section">
          <h2>Implementation</h2>
          
          <div class="implementation-details">
            <h3>Core Components</h3>
            <p style="line-height: 1.5">
              Our engineering-focused implementation emphasizes:
            </p>
            
            <ul class="observations-list" style="margin: 8px 0;">
              <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                <strong>Modular Architecture</strong> - Clearly separated components for data processing, training, and rendering to enable easy customization and extension
              </li>
              <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                <strong>Performance Optimization</strong> - CUDA kernels and algorithmic improvements for faster training and rendering
              </li>
              <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                <strong>Memory Management</strong> - Efficient handling of large point clouds and Gaussian parameters to enable processing of complex scenes
              </li>
            </ul>
            
            <h3>Key Improvements</h3>
            <p style="line-height: 1.5">
              Our implementation includes several key improvements over the original 3DGS:
            </p>
            
            <ul class="observations-list" style="margin: 8px 0;">
              <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                <strong>Adaptive Density Control</strong> - The ABS-GS variant implements an improved adaptive density control strategy that addresses gradient collision issues in the original algorithm
              </li>
              <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                <strong>Robust Scene Modeling</strong> - RAIN-GS provides enhanced stability in challenging environments with complex lighting or sparse views
              </li>
              <li class="observation-item" style="padding: 10px 15px; margin-bottom: 8px;">
                <strong>Scalability Enhancements</strong> - Optimizations for handling large-scale scenes and datasets efficiently
              </li>
            </ul>
          </div>
        </div>
        --> 

        

        <div id="bibtex" class="section">
          <h2>Bibtex</h2>
          <div class="bibtex-container">
            <button
              class="copy-button"
              onclick="copyBibtex()"
              aria-label="Copy BibTeX"
            >
              <svg
                class="clipboard"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <!-- Clipboard board -->
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                ></path>
                <!-- Clipboard clip/header -->
                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                <!-- Optional: Add some lines to represent text on clipboard -->
                <line x1="8" y1="10" x2="16" y2="10"></line>
                <line x1="8" y1="14" x2="16" y2="14"></line>
                <line x1="8" y1="18" x2="13" y2="18"></line>
              </svg>
              <svg
                class="check"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="20,6 9,17 4,12"></polyline>
              </svg>
            </button>
            <pre id="bibtex-content">
@inproceedings{li2025scenesplat,
  title={gaussian-splatting-engineering},
  author={EvangelionA},
  year={2025}
}</pre
            >
          </div>
        </div>

        <div id="acknowledgement" class="section">
          <h2>Acknowledgement</h2>
          <p style="line-height: 1.5">
            This project is built upon
            <a
              href="https://github.com/graphdeco-inria/gaussian-splatting"
              target="_blank"
              style="color: #4b9ae8"
              >3DGS</a
            >
            and
            This Project-webpage is built upon
            <a
              href="https://unique1i.github.io/SceneSplat_webpage/"
              target="_blank"
              style="color: #4b9ae8"
              >SceneSplat</a
            >
            
            We thank all the authors for their great repos.
          </p>
        </div>        

        <footer class="footer">
          <div class="container">
            <h2>LICENSE</h2>
            <p>
              *This website is licensed under the
              <a
                rel="license"
                style="color: #4b9ae8"
                href="http://creativecommons.org/licenses/by-sa/4.0/"
                >CC BY-SA 4.0 License</a
              >. The image comparison slider is from the
              <a
                rel="license"
                style="color: #4b9ae8"
                href="https://github.com/abelcabezaroman/definitive-image-comparison-slider"
                >Dics</a
              >
              repository.
            </p>
          </div>
        </footer>
      </div>
    </div>

    <!-- ✧ Scripts ✧ -->
    <script defer src="static/js/dics.original.js"></script>
    <script>
      let currentDicsInstance = null; // Move this declaration outside the scene switcher function

      document.addEventListener("DOMContentLoaded", () => {
        currentDicsInstance = new Dics({
          container: document.querySelector(".b-dics"),
          hideTexts: false,
          textPosition: "bottom",
        });
      });
    </script>

    <script>
      // Copy BibTeX
      function copyBibtex() {
        const text = document
          .getElementById("bibtex-content")
          .textContent.trim();
        const btn = document.querySelector(".copy-button");

        // Prevent multiple clicks during animation
        if (btn.classList.contains("copied")) return;

        navigator.clipboard
          .writeText(text)
          .then(() => {
            // Success feedback
            btn.classList.add("copied");

            // Optional: Add haptic feedback on supported devices
            if (navigator.vibrate) {
              navigator.vibrate(50);
            }

            // Reset after 2 seconds
            setTimeout(() => {
              btn.classList.remove("copied");
            }, 2000);
          })
          .catch(() => {
            // Fallback for older browsers
            try {
              const textArea = document.createElement("textarea");
              textArea.value = text;
              textArea.style.position = "fixed";
              textArea.style.opacity = "0";
              document.body.appendChild(textArea);
              textArea.select();
              document.execCommand("copy");
              document.body.removeChild(textArea);

              // Show success state even for fallback
              btn.classList.add("copied");
              setTimeout(() => {
                btn.classList.remove("copied");
              }, 2000);
            } catch (err) {
              console.error("Failed to copy text:", err);
              // You could add a toast notification here for error feedback
            }
          });
      }
    </script>

    <script type="module">
      const video1TitleEl = document.getElementById("scene-title");
      if (video1TitleEl && SHOW_VIDEO1_TITLE === false) {
        video1TitleEl.style.display = "none";
      }

      import { WebGLRenderer, PerspectiveCamera, Scene } from "three";
      import { OrbitControls } from "three/addons/controls/OrbitControls.js";
      import { LumaSplatsThree } from "@lumaai/luma-web";

      // change to 9 different sources and init from each
      const SPLAT_SRC = [
        "https://lumalabs.ai/capture/38d65dea-0c1f-41b3-91c0-e855b92418cb",
        "https://lumalabs.ai/capture/f2460a5f-e427-444f-9ca1-96fd3aa06fb1",
        "https://lumalabs.ai/capture/61bb4fc5-36f7-4029-9abe-3fb784ea6baf",

        "https://lumalabs.ai/capture/d2a9a7b3-d7e3-4436-b1b0-829fdca7ef59",
        //'https://lumalabs.ai/embed/fa17d482-0c70-425e-9f93-ea53a0553d43?mode=sparkles&background=%23ffffff&color=%23000000&showTitle=false&loadBg=true&logoPosition=bottom-left&infoPosition=bottom-right&cinematicVideo=undefined&showMenu=false',
        "https://lumalabs.ai/capture/f4a58989-000b-4943-8565-5055b49d8f69",
        "https://lumalabs.ai/capture/fa8347a5-50f6-44a6-b5ec-aee663f216b2",

        "https://lumalabs.ai/capture/c3216590-ae83-4842-9f9c-e4f411baf9e4",
        "https://lumalabs.ai/capture/2a65375b-e719-4a85-92c9-7b2cda21042a",
        "https://lumalabs.ai/capture/2cb1ba33-a526-4271-b01d-85061f6b7962",
      ];

      // Store references to splat instances
      let splatInstances = [];
      let animationFrameId = null;
      let resizeObservers = [];
      let splatsInitialized = false;

      /* ——— Lazy initialization function for splats ——— */
      function initSplatGrid() {
        // Always start fresh
        if (splatsInitialized) return;

        const canvases = document.querySelectorAll(".splat-canvas");

        canvases.forEach((canvas, index) => {
          try {
            // Create a fresh canvas context
            const renderer = new WebGLRenderer({
              canvas,
              antialias: false,
              alpha: true,
              powerPreference: "high-performance",
              preserveDrawingBuffer: false,
            });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));

            const scene = new Scene();
            const { width, height } = canvas.getBoundingClientRect();
            const camera = new PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.z = 2;

            const controls = new OrbitControls(camera, canvas);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.autoRotate = true;
            controls.autoRotateSpeed = 0.3;

            const splat = new LumaSplatsThree({
              source: SPLAT_SRC[index % SPLAT_SRC.length], // Cycle through sources
              particleRevealEnabled: true,
              loadingAnimationEnabled: true,
            });
            scene.add(splat);

            // Create resize observer for this canvas
            const ro = new ResizeObserver((entries) => {
              for (const entry of entries) {
                const { width: w, height: h } = entry.contentRect;
                camera.aspect = w / h;
                camera.updateProjectionMatrix();
                renderer.setSize(w, h, false);
              }
            });
            ro.observe(canvas);
            resizeObservers.push(ro);

            // Store instance data
            splatInstances.push({
              renderer,
              scene,
              camera,
              controls,
              splat,
              canvas,
            });
          } catch (e) {
            console.error(`Error initializing splat ${index}:`, e);
          }
        });

        // Start render loop only if we have instances
        if (splatInstances.length > 0) {
          startRenderLoop();
          splatsInitialized = true;
        }
      }

      /* ——— Cleanup function to destroy splats ——— */
      function cleanupSplats() {
        if (!splatsInitialized) return;

        // Stop render loop first
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
          animationFrameId = null;
        }

        // Cleanup each instance
        splatInstances.forEach((instance) => {
          try {
            // Dispose of controls
            if (instance.controls) {
              instance.controls.dispose();
            }

            // Dispose of splat
            if (instance.splat && instance.scene) {
              instance.scene.remove(instance.splat);
              if (instance.splat.dispose) {
                instance.splat.dispose();
              }
            }

            // Dispose of renderer
            if (instance.renderer) {
              instance.renderer.dispose();
              //instance.renderer.forceContextLoss();
            }
          } catch (e) {
            console.warn("Error during cleanup:", e);
          }
        });

        // Disconnect resize observers
        resizeObservers.forEach((ro) => {
          try {
            ro.disconnect();
          } catch (e) {
            console.warn("Error disconnecting resize observer:", e);
          }
        });

        // Clear arrays
        splatInstances = [];
        resizeObservers = [];
        splatsInitialized = false;
      }

      /* ——— Render loop with pause/resume capability ——— */
      function startRenderLoop() {
        function animate() {
          animationFrameId = requestAnimationFrame(animate);

          splatInstances.forEach((instance) => {
            instance.controls.update();
            instance.renderer.render(instance.scene, instance.camera);
          });
        }
        animate();
      }

      /* ——— Toggle between splats & videos (4 states) ——— */
      const heroSections = [
        document.getElementById("fly-video-1"), // index 0
        document.getElementById("fly-video-2"), // index 1
        document.getElementById("fly-video-3"), // index 2
        document.getElementById("splat-grid"), // index 3
      ];

      const toggle = document.getElementById("hero-toggle");
      const thumb = toggle.querySelector(".thumb");
      const track = toggle.querySelector(".track");

      let currentIndex = 0;

      function updateThumbPosition() {
        const maxTranslate = track.clientWidth - thumb.clientWidth - 8; // 4px padding each side
        const step = maxTranslate / (heroSections.length - 1);
        const x = step * currentIndex;
        thumb.style.transform = `translateX(${x}px)`;
      }

      function setState(idx) {
        // Clean up splats if we're moving away from the data section
        if (currentIndex === 3 && idx !== 3) {
          cleanupSplats();
        }

        heroSections.forEach((sec, i) => {
          if (i === idx) {
            sec.style.display = sec.id === "splat-grid" ? "grid" : "block";

            // Handle splat grid with a delay to ensure cleanup is complete
            if (sec.id === "splat-grid") {
              // If we're coming from another section, add a delay
              if (currentIndex !== 3) {
                setTimeout(() => {
                  initSplatGrid();
                }, 300);
              } else {
                initSplatGrid();
              }
            }

            // Handle videos
            const vid = sec.querySelector("video");
            if (vid) vid.play();
          } else {
            sec.style.display = "none";
            const vid = sec.querySelector("video");
            if (vid) {
              vid.pause();
              vid.currentTime = 0; // Reset video to start
            }
          }
        });
        currentIndex = idx;
        updateThumbPosition();
      }

      // Move to the clicked section
      track.addEventListener("click", (e) => {
        // Distance of the click inside the track (left-to-right)
        const x = e.offsetX;
        const segment = track.clientWidth / heroSections.length;
        const idx = Math.min(heroSections.length - 1, Math.floor(x / segment));
        setState(idx);
      });

      // Re-calculate on resize
      window.addEventListener("resize", updateThumbPosition);

      // Default view (show first video instead of splats)
      setState(0);

      /* ——— Cleanup on page unload ——— */
      window.addEventListener("beforeunload", () => {
        cleanupSplats();
      });

      /* ——— Fade-in main content once ready ——— */
      document.addEventListener("DOMContentLoaded", () => {
        requestAnimationFrame(() =>
          document.getElementById("content").classList.add("visible")
        );
      });
    </script>

    <script>
      /* Sticky table-of-content behaviour with active section highlighting */
      document.addEventListener("DOMContentLoaded", () => {
        const toc = document.getElementById("toc");
        const divider = document.querySelector(".vertical-divider");
        const tocWrapper = document.querySelector(".toc-wrapper");
        const tocLinks = document.querySelectorAll(".toc a");
        const sections = document.querySelectorAll(".section");
        const placeholder = document.querySelector(".toc-placeholder");

        // Check if required elements exist before proceeding
        if (!toc || !divider || !tocWrapper || !placeholder) {
          return; // Exit if any required element is missing
        }

        // Store the initial dimensions when TOC is in normal flow
        let storedWidth = null;
        let storedLeft = null;

        function captureInitialDimensions() {
          // Only capture dimensions when TOC is not fixed
          if (!toc.classList.contains("fixed")) {
            const tocRect = toc.getBoundingClientRect();
            storedWidth = tocRect.width;
            storedLeft = tocRect.left;
          }
        }

        function stickToc() {
          // Get current position of the wrapper
          const wrapperTop = tocWrapper.getBoundingClientRect().top;

          // Should we make it sticky?
          if (wrapperTop <= 20) {
            if (!toc.classList.contains("fixed")) {
              // Capture dimensions before making it fixed
              if (storedWidth === null || storedLeft === null) {
                captureInitialDimensions();
              }

              // Set placeholder to maintain layout
              placeholder.style.height = toc.offsetHeight + "px";
              placeholder.style.display = "block";

              // Make it fixed with stored dimensions
              toc.classList.add("fixed");
              toc.style.width = `${storedWidth}px`;
              toc.style.left = `${storedLeft}px`;

              // Update divider
              divider.style.position = "fixed";
              divider.style.top = "20px";
              divider.style.left = `${storedLeft + storedWidth}px`;
            }
          } else {
            // Should we unfix it?
            if (toc.classList.contains("fixed")) {
              // Remove fixed positioning
              toc.classList.remove("fixed");
              toc.style.width = "";
              toc.style.left = "";

              // Hide placeholder
              placeholder.style.display = "none";
              placeholder.style.height = "0";

              // Reset divider
              divider.style.position = "absolute";
              divider.style.top = "0";
              divider.style.left = "100%";
            }
          }
        }

        function highlightActiveSection() {
          let current = "";

          sections.forEach((section) => {
            const sectionTop = section.offsetTop - 100;
            if (window.scrollY >= sectionTop) {
              current = section.getAttribute("id");
            }
          });

          tocLinks.forEach((link) => {
            link.classList.remove("active");
            if (link.getAttribute("href") === `#${current}`) {
              link.classList.add("active");
            }
          });
        }

        // Handle resize
        function handleResize() {
          // For mobile, disable sticky behavior
          if (window.innerWidth <= 1024) {
            if (toc.classList.contains("fixed")) {
              toc.classList.remove("fixed");
              toc.style.width = "";
              toc.style.left = "";
              placeholder.style.display = "none";
              placeholder.style.height = "0";
              divider.style.position = "absolute";
              divider.style.top = "0";
              divider.style.left = "100%";
            }
            storedWidth = null;
            storedLeft = null;
            return;
          }

          // For desktop resizes
          const wasFixed = toc.classList.contains("fixed");

          if (wasFixed) {
            // Temporarily unfix to recapture natural dimensions
            toc.classList.remove("fixed");
            toc.style.width = "";
            toc.style.left = "";
            placeholder.style.display = "none";
          }

          // Wait for reflow and recapture
          setTimeout(() => {
            storedWidth = null;
            storedLeft = null;
            captureInitialDimensions();

            // Recheck if it should be fixed
            stickToc();
          }, 10);
        }

        // Debounce resize
        let resizeTimeout;
        function debouncedResize() {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(handleResize, 150);
        }

        // Event listeners
        window.addEventListener("scroll", () => {
          stickToc();
          highlightActiveSection();
        });

        window.addEventListener("resize", debouncedResize);

        // Initial setup
        captureInitialDimensions();
        stickToc();
        highlightActiveSection();
      });
    </script>

    <script>
      // Scene Switcher Functionality
      document.addEventListener("DOMContentLoaded", () => {
        const sceneButtons = document.querySelectorAll(".scene-button");
        const comparisonContainer = document.getElementById("scene-comparison");

        // Scene data mapping
        const sceneData = {
          "1ada7a0617": {
            images: [
              "results/comparison/1ada7a0617_mcmc_3dgs.jpg",
              "results/comparison/1ada7a0617_lang_pca.jpg",
              "results/comparison/1ada7a0617_semseg_color.jpg",
              "results/comparison/1ada7a0617_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          bde1e479ad: {
            images: [
              "results/comparison/bde1e479ad_mcmc_3dgs.jpg",
              "results/comparison/bde1e479ad_lang_pca.jpg",
              "results/comparison/bde1e479ad_semseg_color.jpg",
              "results/comparison/bde1e479ad_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          5942004064: {
            images: [
              "results/comparison/5942004064_mcmc_3dgs.jpg",
              "results/comparison/5942004064_lang_pca.jpg",
              "results/comparison/5942004064_semseg_color.jpg",
              "results/comparison/5942004064_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          "09c1414f1b": {
            images: [
              "results/comparison/09c1414f1b_mcmc_3dgs.jpg",
              "results/comparison/09c1414f1b_lang_pca.jpg",
              "results/comparison/09c1414f1b_semseg_color.jpg",
              "results/comparison/09c1414f1b_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          "3db0a1c8f3": {
            images: [
              "results/comparison/3db0a1c8f3_mcmc_3dgs.jpg",
              "results/comparison/3db0a1c8f3_lang_pca.jpg",
              "results/comparison/3db0a1c8f3_semseg_color.jpg",
              "results/comparison/3db0a1c8f3_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          3864514494: {
            images: [
              "results/comparison/3864514494_mcmc_3dgs.jpg",
              "results/comparison/3864514494_lang_pca.jpg",
              "results/comparison/3864514494_semseg_color.jpg",
              "results/comparison/3864514494_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          "5f99900f09": {
            images: [
              "results/comparison/5f99900f09_mcmc_3dgs.jpg",
              "results/comparison/5f99900f09_lang_pca.jpg",
              "results/comparison/5f99900f09_semseg_color.jpg",
              "results/comparison/5f99900f09_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          "9071e139d9": {
            images: [
              "results/comparison/9071e139d9_mcmc_3dgs.jpg",
              "results/comparison/9071e139d9_lang_pca.jpg",
              "results/comparison/9071e139d9_semseg_color.jpg",
              "results/comparison/9071e139d9_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
          fb5a96b1a2: {
            images: [
              "results/comparison/fb5a96b1a2_mcmc_3dgs.jpg",
              "results/comparison/fb5a96b1a2_lang_pca.jpg",
              "results/comparison/fb5a96b1a2_semseg_color.jpg",
              "results/comparison/fb5a96b1a2_semseg_color_gt.jpg",
            ],
            labels: [
              "3DGS Render",
              "Inference (PCA)",
              "Zero-shot Sem. Seg.",
              "Sem. Seg. GT",
            ],
          },
        };

        // Function to update the image slider comparison container
        function updateComparison(sceneId) {
          const data = sceneData[sceneId];
          if (!data) return;

          const wrapper = document.getElementById("scene-comparison-wrapper");

          // Check if wrapper exists before accessing its properties
          if (wrapper) {
            // Preserve the current height before clearing
            const currentHeight = wrapper.offsetHeight;
            wrapper.style.minHeight = `${currentHeight}px`;
          }

          // Create a completely new container
          const newContainer = document.createElement("div");
          newContainer.className = "b-dics";
          newContainer.style.fontWeight = "600";

          // Add new images to the new container
          data.images.forEach((imageSrc, index) => {
            const img = document.createElement("img");
            img.src = imageSrc;
            img.alt = data.labels[index];
            newContainer.appendChild(img);
          });

          // Replace the old container with the new one
          wrapper.innerHTML = "";
          wrapper.appendChild(newContainer);

          // Wait for images to load before initializing Dics
          Promise.all(
            Array.from(newContainer.querySelectorAll("img")).map((img) => {
              if (img.complete) return Promise.resolve();
              return new Promise((resolve) => {
                img.addEventListener("load", resolve);
                img.addEventListener("error", resolve);
              });
            })
          ).then(() => {
            try {
              currentDicsInstance = new Dics({
                container: newContainer,
                hideTexts: false,
                textPosition: "bottom",
              });

              // Remove the min-height after Dics is initialized
              wrapper.style.minHeight = "";
            } catch (e) {
              console.warn("Error creating new Dics instance:", e);
              wrapper.style.minHeight = "";
            }
          });
        }
        // function updateComparison(sceneId) {
        //   const data = sceneData[sceneId];
        //   if (!data) return;

        //   // Get the wrapper instead of the container
        //   const wrapper = document.getElementById("scene-comparison-wrapper");

        //   // Create a completely new container
        //   const newContainer = document.createElement("div");
        //   newContainer.className = "b-dics";
        //   newContainer.style.fontWeight = "600";

        //   // Add new images to the new container
        //     data.images.forEach((imageSrc, index) => {
        //     const img = document.createElement("img");
        //     img.src = imageSrc;
        //     img.alt = data.labels[index];
        //     newContainer.appendChild(img);
        //   });

        //   // Replace the old container with the new one
        //   wrapper.innerHTML = "";
        //   wrapper.appendChild(newContainer);

        //   // Create new Dics instance on the fresh container
        //   setTimeout(() => {
        //     try {
        //       currentDicsInstance = new Dics({
        //         container: newContainer,
        //         hideTexts: false,
        //         textPosition: "bottom",
        //       });
        //     } catch (e) {
        //       console.warn("Error creating new Dics instance:", e);
        //     }
        //   }, 100);
        // }

        // Add click handlers to scene buttons
        sceneButtons.forEach((button) => {
          button.addEventListener("click", () => {
            // Update active state
            sceneButtons.forEach((btn) => btn.classList.remove("active"));
            button.classList.add("active");

            // Update comparison
            const sceneId = button.getAttribute("data-scene");
            updateComparison(sceneId);
          });
        });

        // Initialize with first scene
        updateComparison("bde1e479ad");
      });

      // ...existing code...
    </script>
  </body>
</html>
